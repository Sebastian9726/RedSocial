{"remainingRequest":"/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/node_modules/babel-loader/lib/index.js!/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/src/components/Posts/Posts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/src/components/Posts/Posts.vue","mtime":1543505441000},{"path":"/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/node_modules/cache-loader/dist/cjs.js","mtime":1648227723569},{"path":"/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/home/sebastian/Escritorio/proyecto-9-vue-social-network-master/client/node_modules/@babel/runtime/helpers/builtin/es6/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { INFINITE_SCROLL_POSTS } from \"../../queries\";\nvar pageSize = 6;\nexport default {\n  name: \"Posts\",\n  data: function data() {\n    return {\n      pageNum: 1 // showMoreEnabled: true\n\n    };\n  },\n  apollo: {\n    infiniteScrollPosts: {\n      query: INFINITE_SCROLL_POSTS,\n      variables: {\n        pageNum: 1,\n        pageSize: pageSize\n      }\n    }\n  },\n  computed: {\n    showMoreEnabled: function showMoreEnabled() {\n      return this.infiniteScrollPosts && this.infiniteScrollPosts.hasMore;\n    }\n  },\n  methods: {\n    goToPost: function goToPost(postId) {\n      this.$router.push(\"/posts/\".concat(postId));\n    },\n    showMorePosts: function showMorePosts() {\n      this.pageNum += 1; // Se hace otro 'fetch' para traer más posts\n\n      this.$apollo.queries.infiniteScrollPosts.fetchMore({\n        variables: {\n          // Se incrementa el numero de pagina en 1\n          pageNum: this.pageNum,\n          pageSize: pageSize\n        },\n        updateQuery: function updateQuery(prevResult, _ref) {\n          var fetchMoreResult = _ref.fetchMoreResult;\n          console.log(\"previous result\", prevResult.infiniteScrollPosts.posts);\n          console.log(\"fetch more result\", fetchMoreResult);\n          var newPosts = fetchMoreResult.infiniteScrollPosts.posts;\n          var hasMore = fetchMoreResult.infiniteScrollPosts.hasMore; // this.showMoreEnabled = hasMore;\n\n          return {\n            infiniteScrollPosts: {\n              __typename: prevResult.infiniteScrollPosts.__typename,\n              // Se unen los post anteriores con los siguientes\n              posts: _toConsumableArray(prevResult.infiniteScrollPosts.posts).concat(_toConsumableArray(newPosts)),\n              hasMore: hasMore\n            }\n          };\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Posts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,SAAA,qBAAA,QAAA,eAAA;AACA,IAAA,WAAA,CAAA;AACA,eAAA;AACA,QAAA,OADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,eAAA,CADA,CAEA;;AAFA,KAAA;AAIA,GAPA;AAQA,UAAA;AACA,yBAAA;AACA,aAAA,qBADA;AAEA,iBAAA;AACA,iBAAA,CADA;AAEA;AAFA;AAFA;AADA,GARA;AAiBA,YAAA;AACA,mBADA,6BACA;AACA,aAAA,KAAA,mBAAA,IAAA,KAAA,mBAAA,CAAA,OAAA;AACA;AAHA,GAjBA;AAsBA,WAAA;AACA,YADA,oBACA,MADA,EACA;AACA,WAAA,OAAA,CAAA,IAAA,kBAAA,MAAA;AACA,KAHA;AAIA,iBAJA,2BAIA;AACA,WAAA,OAAA,IAAA,CAAA,CADA,CAEA;;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,mBAAA,CAAA,SAAA,CAAA;AACA,mBAAA;AACA;AACA,mBAAA,KAAA,OAFA;AAGA;AAHA,SADA;AAMA,qBAAA,qBAAA,UAAA,QAAA;AAAA,cAAA,eAAA,QAAA,eAAA;AACA,kBAAA,GAAA,CAAA,iBAAA,EAAA,WAAA,mBAAA,CAAA,KAAA;AACA,kBAAA,GAAA,CAAA,mBAAA,EAAA,eAAA;AACA,cAAA,WAAA,gBAAA,mBAAA,CAAA,KAAA;AACA,cAAA,UAAA,gBAAA,mBAAA,CAAA,OAAA,CAJA,CAKA;;AACA,iBAAA;AACA,iCAAA;AACA,0BAAA,WAAA,mBAAA,CAAA,UADA;AAEA;AACA,wCAAA,WAAA,mBAAA,CAAA,KAAA,4BAAA,QAAA,EAHA;AAIA;AAJA;AADA,WAAA;AAQA;AApBA,OAAA;AAsBA;AA7BA;AAtBA,CAAA","sourcesContent":["<template>\n  <v-container fluid grid-list-xl>\n    <v-layout row wrap v-if=\"infiniteScrollPosts\">\n      <v-flex xs12 sm4 v-for=\"post in infiniteScrollPosts.posts\" :key=\"post._id\">\n        <v-card hover>\n          <v-card-media :src=\"post.imageUrl\" height=\"30vh\" lazy @click.native=\"goToPost(post._id)\"></v-card-media>\n          <v-card-actions>\n            <v-card-title primary>\n              <div>\n                <div class=\"headline\">{{post.title}}</div>\n                <span class=\"grey--text\">{{post.likes}} likes - {{post.messages.length}} comentarios</span>\n              </div>\n            </v-card-title>\n            <v-spacer></v-spacer>\n          </v-card-actions>\n          <v-divider light></v-divider>\n          <v-card-actions class=\"pa-3\">\n            <img :src=\"post.createdBy.avatar\" height=\"30\">\n            <span class=\"grey--text ml-2\">{{post.createdBy.username}}</span>\n            <!-- <span class=\"grey--text\">{{post.createdDate}}</span> -->\n            <v-spacer></v-spacer>\n            <v-btn icon ripple>\n              <v-icon color=\"grey lighten-1\">info</v-icon>\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-flex>\n    </v-layout>\n    <v-layout v-if=\"showMoreEnabled\" column>\n      <v-flex xs12>\n        <v-layout justify-center row>\n          <v-btn color=\"primary\" @click=\"showMorePosts\">Cargar más</v-btn>\n        </v-layout>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport { INFINITE_SCROLL_POSTS } from \"../../queries\";\nconst pageSize = 6;\nexport default {\n  name: \"Posts\",\n  data() {\n    return {\n      pageNum: 1,\n      // showMoreEnabled: true\n    };\n  },\n  apollo: {\n    infiniteScrollPosts: {\n      query: INFINITE_SCROLL_POSTS,\n      variables: {\n        pageNum: 1,\n        pageSize\n      }\n    }\n  },\n  computed:{\n    showMoreEnabled(){\n      return this.infiniteScrollPosts && this.infiniteScrollPosts.hasMore;\n    }\n  },\n  methods: {\n    goToPost(postId) {\n      this.$router.push(`/posts/${postId}`);\n    },\n    showMorePosts() {\n      this.pageNum += 1;\n      // Se hace otro 'fetch' para traer más posts\n      this.$apollo.queries.infiniteScrollPosts.fetchMore({\n        variables: {\n          // Se incrementa el numero de pagina en 1\n          pageNum: this.pageNum,\n          pageSize\n        },\n        updateQuery: (prevResult, { fetchMoreResult }) => {\n          console.log(\"previous result\", prevResult.infiniteScrollPosts.posts);\n          console.log(\"fetch more result\", fetchMoreResult);\n          const newPosts = fetchMoreResult.infiniteScrollPosts.posts;\n          const hasMore = fetchMoreResult.infiniteScrollPosts.hasMore;\n          // this.showMoreEnabled = hasMore;\n          return {\n            infiniteScrollPosts: {\n              __typename: prevResult.infiniteScrollPosts.__typename,\n              // Se unen los post anteriores con los siguientes\n              posts: [...prevResult.infiniteScrollPosts.posts, ...newPosts],\n              hasMore\n            }\n          };\n        }\n      });\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/components/Posts"}]}